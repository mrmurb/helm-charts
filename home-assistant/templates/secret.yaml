{{- if .Values.configuration.enabled -}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "home-assistant.fullname" . }}-api-token
type: Opaque
data:
  {{- if .Values.configuration.apiToken -}}
  token: "{{ .Values.apiToken | b64enc }}"
  {{ else }}
  token: "{{ randAlphaNum 20 | b64enc }}"
  {{- end -}}
{{- end -}}